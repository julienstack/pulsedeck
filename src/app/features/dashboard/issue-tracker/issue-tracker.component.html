<div class="p-6 fade-in">
    <!-- Header -->
    <div class="mb-8">
        <div class="flex items-center gap-3 mb-2">
            <div class="w-10 h-10 rounded-xl bg-amber-500/20 flex items-center justify-center">
                <i class="pi pi-list-check text-amber-500 text-xl"></i>
            </div>
            <h1 class="text-3xl font-bold text-[var(--color-text)]">Feedback Übersicht</h1>
        </div>
        <p class="text-[var(--color-text-muted)] ml-13">
            Alle eingereichten Vorschläge und Bugs aus der Alpha Phase
        </p>
    </div>

    <!-- Stats Cards -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
        <div class="bg-[var(--color-surface-raised)] border border-[var(--color-border)] rounded-xl p-5">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-[var(--color-text-muted)] text-sm font-medium">Gesamt</p>
                    <p class="text-3xl font-bold text-[var(--color-text)] mt-1">{{ feedbackList().length }}</p>
                </div>
                <div class="w-12 h-12 rounded-xl bg-[var(--color-surface-overlay)] flex items-center justify-center">
                    <i class="pi pi-inbox text-[var(--color-text-muted)] text-xl"></i>
                </div>
            </div>
        </div>
        <div class="bg-[var(--color-surface-raised)] border border-[var(--color-border)] rounded-xl p-5">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-[var(--color-text-muted)] text-sm font-medium">Vorschläge</p>
                    <p class="text-3xl font-bold text-teal mt-1">{{ getSuggestionCount() }}</p>
                </div>
                <div class="w-12 h-12 rounded-xl bg-teal/20 flex items-center justify-center">
                    <i class="pi pi-lightbulb text-teal text-xl"></i>
                </div>
            </div>
        </div>
        <div class="bg-[var(--color-surface-raised)] border border-[var(--color-border)] rounded-xl p-5">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-[var(--color-text-muted)] text-sm font-medium">Bugs</p>
                    <p class="text-3xl font-bold text-rose-400 mt-1">{{ getBugCount() }}</p>
                </div>
                <div class="w-12 h-12 rounded-xl bg-rose-500/20 flex items-center justify-center">
                    <i class="pi pi-exclamation-triangle text-rose-400 text-xl"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Table -->
    <div class="bg-[var(--color-surface-raised)]/30 border border-[var(--color-border)] rounded-2xl overflow-hidden">
        <p-table [value]="feedbackList()" [loading]="loading()" styleClass="p-datatable-sm"
            [tableStyle]="{ 'min-width': '50rem' }" [rowHover]="true">
            <ng-template pTemplate="header">
                <tr class="!bg-[var(--color-surface-raised)]">
                    <th class="!bg-transparent !text-[var(--color-text)] !font-semibold !text-sm !py-4"
                        style="width: 12%">Typ</th>
                    <th class="!bg-transparent !text-[var(--color-text)] !font-semibold !text-sm !py-4">Beschreibung
                    </th>
                    <th class="!bg-transparent !text-[var(--color-text)] !font-semibold !text-sm !py-4"
                        style="width: 18%">Datum
                    </th>
                    <th class="!bg-transparent !text-[var(--color-text)] !font-semibold !text-sm !py-4"
                        style="width: 12%">Status
                    </th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-feedback>
                <tr class="!bg-transparent hover:!bg-[var(--color-surface-overlay)] transition-colors">
                    <td class="!py-4 !border-[var(--color-border)]">
                        <div class="flex items-center gap-2">
                            @if (feedback.type === 'bug') {
                            <div class="w-8 h-8 rounded-lg bg-rose-500/20 flex items-center justify-center">
                                <i class="pi pi-exclamation-triangle text-rose-400 text-sm"></i>
                            </div>
                            <span class="font-semibold text-rose-400 text-sm">Bug</span>
                            } @else {
                            <div class="w-8 h-8 rounded-lg bg-teal/20 flex items-center justify-center">
                                <i class="pi pi-lightbulb text-teal text-sm"></i>
                            </div>
                            <span class="font-semibold text-teal text-sm">Vorschlag</span>
                            }
                        </div>
                    </td>
                    <td class="!py-4 !border-[var(--color-border)]">
                        <p class="text-[var(--color-text)] text-sm leading-relaxed whitespace-pre-wrap">{{
                            feedback.description }}</p>
                    </td>
                    <td class="!py-4 !border-[var(--color-border)]">
                        <span class="text-[var(--color-text-muted)] text-sm">{{ feedback.created_at | date:'dd.MM.yyyy,
                            HH:mm' }}</span>
                    </td>
                    <td class="!py-4 !border-[var(--color-border)]">
                        <span class="inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold"
                            [class.bg-linke/20]="feedback.status === 'new'"
                            [class.text-linke]="feedback.status === 'new'"
                            [class.bg-amber-500/20]="feedback.status === 'in_progress'"
                            [class.text-amber-500]="feedback.status === 'in_progress'"
                            [class.bg-emerald-500/20]="feedback.status === 'done'"
                            [class.text-emerald-500]="feedback.status === 'done'">
                            @if (feedback.status === 'new') {
                            <i class="pi pi-circle-fill text-[6px] mr-2"></i>
                            } @else if (feedback.status === 'in_progress') {
                            <i class="pi pi-spin pi-spinner text-[10px] mr-2"></i>
                            } @else {
                            <i class="pi pi-check text-[10px] mr-2"></i>
                            }
                            {{ getStatusLabel(feedback.status) }}
                        </span>
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
                <tr>
                    <td colspan="4" class="!py-16 !border-0">
                        <div class="flex flex-col items-center justify-center text-center">
                            <div
                                class="w-16 h-16 rounded-2xl bg-[var(--color-surface-overlay)] flex items-center justify-center mb-4">
                                <i class="pi pi-inbox text-[var(--color-text-muted)] text-3xl"></i>
                            </div>
                            <p class="text-[var(--color-text-muted)] font-medium">Noch kein Feedback vorhanden</p>
                            <p class="text-[var(--color-text-muted)] text-sm mt-1">Eingereichte Vorschläge und Bugs
                                erscheinen hier</p>
                        </div>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>