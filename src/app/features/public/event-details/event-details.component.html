<div class="min-h-screen bg-[var(--color-surface-ground)] flex flex-col items-center justify-center p-4">

    <!-- Loading -->
    @if (loading()) {
    <p-progressSpinner ariaLabel="Lade Event..." />
    }

    <!-- Error -->
    @if (!loading() && error()) {
    <div class="text-center">
        <i class="pi pi-exclamation-circle text-4xl text-red-500 mb-3"></i>
        <h1 class="text-xl font-bold mb-2">Ups!</h1>
        <p class="text-[var(--color-text-muted)] mb-4">{{ error() }}</p>
        <a routerLink="/" pButton label="Zur Startseite"></a>
    </div>
    }

    <!-- Content -->
    @if (event(); as e) {
    <div class="w-full max-w-lg bg-[var(--color-surface-card)] rounded-xl shadow-xl overflow-hidden animate-fadein-up">

        <!-- Hero Header (Color Brand) -->
        <div class="h-32 bg-linke relative flex items-end p-6">
            <div class="absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"></div>

            <!-- Date Badge -->
            <div
                class="absolute top-4 right-4 bg-white/90 backdrop-blur text-black rounded-lg p-2 text-center shadow-lg">
                <div class="text-xs font-bold uppercase tracking-wider">{{ e.date | date:'MMM' }}</div>
                <div class="text-2xl font-black leading-none">{{ e.date | date:'dd' }}</div>
            </div>

            <div class="relative z-10 w-full text-white">
                @if (e.organization) {
                <div class="flex items-center gap-2 mb-2 opacity-90">
                    @if (e.organization.logo_url) {
                    <img [src]="e.organization.logo_url" class="w-6 h-6 rounded-full bg-white object-cover">
                    }
                    <span class="text-sm font-medium">{{ e.organization.name }}</span>
                </div>
                }
                <h1 class="text-2xl font-bold leading-tight">{{ e.title }}</h1>
            </div>
        </div>

        <!-- Details -->
        <div class="p-6 space-y-6">

            <!-- Info Grid -->
            <div class="grid grid-cols-1 gap-4 text-sm text-[var(--color-text)]">
                <div class="flex items-start gap-3">
                    <i class="pi pi-clock mt-0.5 text-linke"></i>
                    <div>
                        <div class="font-semibold">Zeit</div>
                        <div>{{ e.start_time }} Uhr @if(e.end_time) { - {{ e.end_time }} Uhr }</div>
                    </div>
                </div>
                <div class="flex items-start gap-3">
                    <i class="pi pi-map-marker mt-0.5 text-linke"></i>
                    <div>
                        <div class="font-semibold">Ort</div>
                        <div>{{ e.location }}</div>
                        <a [href]="'https://maps.google.com/?q=' + e.location" target="_blank"
                            class="text-xs text-linke hover:underline">Karte Ã¶ffnen</a>
                    </div>
                </div>
            </div>

            @if (e.description) {
            <div class="pt-4 border-t border-[var(--color-border)]">
                <h3 class="font-semibold mb-2">Infos</h3>
                <p class="text-[var(--color-text-muted)] whitespace-pre-wrap">{{ e.description }}</p>
            </div>
            }

            <!-- Actions -->
            <div class="pt-6 border-t border-[var(--color-border)] flex flex-col gap-3">
                <a routerLink="/auth/login" [queryParams]="{ returnUrl: '/dashboard' }" pButton
                    label="Anmelden & Teilnehmen" icon="pi pi-user" class="w-full"></a>
                <div class="text-center text-xs text-[var(--color-text-muted)]">
                    Du hast noch keinen Account? <a routerLink="/auth/register"
                        class="text-linke hover:underline">Registrieren</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Lexion Branding Footer -->
    <div class="mt-6 text-center">
        <a routerLink="/"
            class="text-sm text-[var(--color-text-muted)] font-medium opacity-50 hover:opacity-100 transition-opacity">
            Powered by <span class="font-bold">PulseDeck</span>
        </a>
    </div>
    }
</div>